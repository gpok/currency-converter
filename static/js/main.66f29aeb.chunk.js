(this.webpackJsonpcurrencies=this.webpackJsonpcurrencies||[]).push([[0],{40:function(e,t,n){e.exports=n(78)},45:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),l=(n(45),n(9)),u=n(13),i=n(38),s=n(2),d=(n(50),n(51),function(e){var t=e.wrapperType,n=e.children,a=e.height,c={};return null!==a&&(c.maxHeight="".concat(a,"px"),c.height="100%"),r.a.createElement("div",{className:"CentralizedWrapper CentralizedWrapper-".concat(t)},r.a.createElement("div",{className:"CentralizedWrapper_Child",style:c},n))});d.defaultProps={wrapperType:"AbsoluteFill",height:null};var m=d,f=(n(52),n(4)),p=n.n(f),v="ACTION_ADD_ERROR",y="ACTION_ADD_WARNING",h="ACTION_ADD_INFO",E="ACTION_ADD_SUCCESS",C="ACTION_REMOVE_BY_KEY",b={ERROR:"ERROR",WARNING:"WARNING",INFO:"INFO",SUCCESS:"SUCCESS"},g=(p.a.shape({type:p.a.oneOf(Object.keys(b)),header:p.a.string,message:p.a.string,key:p.a.string}),{type:b.WARNING,header:"NULL",message:"NULL",key:"0"}),w={AddError:function(e,t){return{type:v,header:e,message:t}},AddWarning:function(e,t){return{type:y,header:e,message:t}},AddInfo:function(e,t){return{type:h,header:e,message:t}},AddSuccess:function(e,t){return{type:E,header:e,message:t}},Remove:function(e){return{type:C,key:e}}},S=n(11),O=function(e){var t=e.alert,n=e.timeout,c=e.remove,o=Object(a.useState)(null),l=Object(S.a)(o,2),u=l[0],i=l[1];return Object(a.useEffect)((function(){0!==n&&i(setTimeout((function(){c(t.key)}),1e3*n))}),[t.key,c,n]),r.a.createElement("div",{className:"Alert_Entry Alert_Entry-".concat(t.type)},r.a.createElement("p",{className:"Alert_Entry_Header"},t.header),"undefined"!==t.message&&r.a.createElement("p",{className:"Alert_Entry_Message"},t.message),r.a.createElement("button",{type:"button",onClick:function(){null!==u&&clearTimeout(u),c(t.key)}},"\u274c"))};O.defaultProps={alert:g,timeout:10};var N=Object(l.b)((function(){return{}}),(function(e){return{remove:function(t){return e(w.Remove(t))}}}))(O),k=function(e){var t=e.alert;return r.a.createElement("div",{className:"Alert_Wrapper"},t.map((function(e){switch(e.type){case b.ERROR:return r.a.createElement(N,{alert:e,key:e.key,timeout:30});case b.SUCCESS:return r.a.createElement(N,{alert:e,key:e.key,timeout:5});default:return r.a.createElement(N,{alert:e,key:e.key,timeout:10})}})))};k.defaultProps={alert:[]};var j=Object(l.b)((function(e){return{alert:e.alert}}),null)(k),_=(n(53),function(e){var t=e.children,n=e.sidePanel,c=e.sideHeader,o=Object(a.useState)(!1),l=Object(S.a)(o,2),u=l[0],i=l[1],s={};return u&&(s.width="340px"),r.a.createElement("div",{className:"SidePanelContainer"},r.a.createElement("div",{className:"SidePanelContainer_Content"},r.a.createElement("div",{className:"SidePanelContainer_Content_Main"},t),r.a.createElement("div",{className:"SidePanelContainer_Content_Side",style:s},r.a.createElement("div",{style:{width:"300px"}},"function"===typeof n?n({opened:u}):n))),r.a.createElement("button",{type:"button",className:"SidePanelContainer_Button".concat(u?" SidePanelContainer_Button-Opened":""),onClick:function(){i(!u)}},r.a.createElement("p",null,"\u274c"),c))});_.defaultProps={sidePanel:"",sideHeader:"SIDE"};var A=_,R=(n(54),n(55),n(14)),I=n(37),F=function(e){var t=e.name,n=e.placeholder,a=e.validate,c=e.label,o=e.editable,l=e.useFinalForm,u=e.value;return l?r.a.createElement(R.a,{name:t,component:"input",validate:function(e){return a?e?isNaN(parseFloat(e))?"Warto\u015b\u0107 nie jest liczb\u0105":null:"Warto\u015b\u0107 jest wymagana":null}},(function(e){var a=e.input,l=e.meta;return r.a.createElement("div",{className:"ConverterForm_FullLine"},r.a.createElement("input",Object.assign({},a,{type:"text",placeholder:n,id:"CurrencyValue-".concat(t),readOnly:!o})),c&&r.a.createElement("label",{htmlFor:"CurrencyValue-".concat(t)},c),r.a.createElement("span",{className:"ConverterForm_Error"},l.error&&l.error))})):r.a.createElement("div",{className:"ConverterForm_FullLine"},r.a.createElement("input",{type:"text",placeholder:n,id:"CurrencyValue-".concat(t),readOnly:!o,value:u}),c&&r.a.createElement("label",{htmlFor:"CurrencyValue-".concat(t)},c))};F.defaultProps={placeholder:"",label:"",validate:!0,editable:!0,useFinalForm:!0,value:""};var T=F,H=(n(56),function(e){var t=e.input,n=e.options,c=Object(a.useRef)(null),o=Object(a.useRef)(null),l=Object(a.useState)(!1),u=Object(S.a)(l,2),i=u[0],s=u[1];function d(e){if(o.current){var n=o.current.querySelector('[data-value^="'.concat(e,'"]'));n&&(o.current.scrollTop=n.offsetTop,t.onChange(n.dataset.value))}}function m(e){c&&!c.current.contains(e.target)&&(s(!1),t.onBlur())}return Object(a.useEffect)((function(){return document.addEventListener("mousedown",m),function(){document.removeEventListener("mousedown",m)}}),[m]),Object(a.useEffect)((function(){i&&d(t.value)}),[i,d,t.value]),r.a.createElement("div",{className:"CustomSelect",ref:c,role:"button",tabIndex:0,onMouseDown:function(){console.log("down"),console.log(n),s(!i)},onFocus:function(e){s(!0),t.onFocus(e)},onBlur:function(e){s(!1),t.onBlur(e)},onKeyDown:function(e){if(i||s(!i),o.current){var a=null;if(38===e.keyCode){var r=n.findIndex((function(e){return e.value===t.value}));r>0&&(a=n[r-1].value)}else if(40===e.keyCode){var c=n.findIndex((function(e){return e.value===t.value}));c<n.length-1&&(a=n[c+1].value)}else e.key&&1===e.key.length&&e.key.match(/[a-z]/i)&&(a=e.key.toUpperCase());null!==a&&d(a)}}},r.a.createElement("div",{className:"CustomSelect_Header".concat(i?" CustomSelect_Header-Opened":"")},t.value),i&&r.a.createElement("ul",{className:"CustomSelect_List".concat(i?" CustomSelect_Header-Opened":""),ref:o},n.map((function(e){var n=e.value,a=e.label;return r.a.createElement("li",{className:"CustomSelect_List_Element".concat(t.value===n?" CustomSelect_List_Element-Selected":""),"data-value":n,key:n,onMouseDown:function(){t.onChange(n),s(!1)},"aria-selected":t.value===n,role:"option"},a)}))))});H.defaultProps={};var P=H,W=function(e){var t=e.name,n=e.placeholder,a=e.options;return r.a.createElement("div",{className:"ConverterForm_Select"},r.a.createElement(R.a,{name:t,component:P,placeholder:n,initialValue:a.length>0?a[0]:"",options:a.map((function(e){return{value:e,label:e}}))}))};W.defaultProps={placeholder:"",options:[]};var V=W,x=n(23),D=n.n(x),z="https://openexchangerates.org/api/",L={GetCurrencies:function(e,t){D.a.request({url:"".concat(z,"currencies.json"),method:"get",responseType:"json"}).then((function(t){e(Object.keys(t.data))})).catch((function(e){t(e)}))},ConvertCurrency:function(e,t,n,a,r){D.a.request({url:"".concat(z,"latest.json"),method:"get",responseType:"json",params:{app_id:"bd35b2e981784018a6c65e183ea83294"},crossdomain:!0}).then((function(r){a(Math.floor(n/r.data.rates[e]*r.data.rates[t]*100)/100)})).catch((function(e){r(e)}))}},U="ACTION_SET",B="ACTION_CLEAR",M=(p.a.shape({id:p.a.number,date:p.a.string,entryValue:p.a.string,resultValue:p.a.string}),{Clear:function(){return{type:B}},Set:function(e){return{type:U,data:e}}}),G=n(10),q=n.n(G),K=n(15),J=n(39),Y="ConversionHistory",Z=function(){return Object(J.a)("Currency",1,{upgrade:function(e,t){if(0===t){var n=e.createObjectStore(Y,{keyPath:"id",autoIncrement:!0});n.createIndex("date","date",{unique:!1}),n.createIndex("entryValue","entryValue",{unique:!1}),n.createIndex("resultValue","resultValue",{unique:!1})}}})};function $(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(K.a)(q.a.mark((function e(t,n){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z().then((function(e){e.getAll(Y).then((function(e){t(e)})).catch((function(e){n(e)}))})).catch((function(e){n(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(K.a)(q.a.mark((function e(t,n,a){var r,c,o;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.date,c=t.entryValue,o=t.resultValue,Z().then((function(e){e.add(Y,{date:r,entryValue:c,resultValue:o}).then((function(){$(n,a)})).catch((function(e){a(e)}))})).catch((function(e){a(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(K.a)(q.a.mark((function e(t,n){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z().then((function(e){e.clear(Y).then((function(){$(t,n)})).catch((function(e){n(e)}))})).catch((function(e){n(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=function(e){var t=e.addError,n=e.AddInfo,c=e.SetConversionHistory,o=Object(a.useState)(["USD"]),l=Object(S.a)(o,2),u=l[0],i=l[1],s=Object(a.useState)(""),d=Object(S.a)(s,2),m=d[0],f=d[1];Object(a.useEffect)((function(){L.GetCurrencies((function(e){n("Zaktualizowano  liste walut"),i(e)}),(function(e){t("Nie uda\u0142o si\u0119 pobra\u0107 listy walut",e.message)}))}),[n,t]);var p=function(e){var n=e.CurrencySource,a=e.CurrencyTarget,r=e.CurrencyValue;L.ConvertCurrency(n,a,parseFloat(r.replace(",",".")),(function(e){!function(e,t,n){X.apply(this,arguments)}({date:(new Date).toLocaleDateString(),entryValue:"".concat(r," ").concat(n),resultValue:"".concat(e," ").concat(a)},(function(e){c(e)}),(function(e){console.log({error:e})})),f(e)}),(function(e){t("Nie uda\u0142o si\u0119 przekonwertowa\u0107 waluty",e.message)}))};return r.a.createElement(R.b,{onSubmit:function(e){p(e)},validate:function(e){var t={};return e.CurrencySource===e.CurrencyTarget&&(t.CurrencySame="Waluta docelowa nie mo\u017ce by\u0107 identyczna z konwertowan\u0105"),t},mutators:{switchCurrencies:function(e,t,n){var a=t.formState.values;n.changeValue(t,"CurrencySource",(function(){return a.CurrencyTarget})),n.changeValue(t,"CurrencyTarget",(function(){return a.CurrencySource}))}},render:function(e){var t=e.handleSubmit,n=e.submitting,a=e.pristine,c=e.invalid,o=e.errors,l=e.values,i=e.form;return r.a.createElement("form",{onSubmit:t,className:"ConverterForm"},r.a.createElement(T,{name:"CurrencyValue",placeholder:"Wpisz kwot\u0119",label:l.CurrencySource}),r.a.createElement(T,{name:"CurrencyResult",placeholder:"Wynik",validate:!1,label:l.CurrencyTarget,editable:!1,useFinalForm:!1,value:"".concat(m)}),r.a.createElement("div",{className:"ConverterForm_DoubleSelect"},r.a.createElement(V,{name:"CurrencySource",options:u}),r.a.createElement("button",{type:"button",onClick:function(){i.mutators.switchCurrencies()}},"\u21c4"),r.a.createElement(V,{name:"CurrencyTarget",options:u}),r.a.createElement("span",{className:"ConverterForm_Error"},o.CurrencySame&&o.CurrencySame)),r.a.createElement("button",{type:"submit",disabled:a||c||n},"KONWERTUJ"),r.a.createElement(I.Offline,null,r.a.createElement("span",{className:"ConverterForm_Error"},"Musisz mie\u0107 dost\u0119p do internetu,",r.a.createElement("br",null)," by m\xf3c konwertowa\u0107 waluty z obecnym kursem.")))}})};te.defaultProps={};var ne=Object(l.b)(null,(function(e){return{addError:function(t,n){return e(w.AddError(t,n))},AddInfo:function(t,n){return e(w.AddInfo(t,n))},SetConversionHistory:function(t){return e(M.Set(t))}}}))(te),ae=function(){return r.a.createElement("div",{className:"Converter"},r.a.createElement("p",{className:"Converter_Header"},"Konwerter walut"),r.a.createElement(ne,null))};ae.defaultProps={};var re=ae,ce=n(12),oe=(n(75),n(76),function(e){var t=e.data,n=e.style;return r.a.createElement("table",{className:"ConversionHistoryTable",style:n},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Data"),r.a.createElement("th",null,"Przed konwersj\u0105"),r.a.createElement("th",{style:{width:"15px"}}),r.a.createElement("th",null,"Po konwersji"))),r.a.createElement("tbody",null,t.length<1?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},"Brak zapis\xf3w historycznych")):t.map((function(e){return r.a.createElement("tr",{key:"".concat(e.id)},r.a.createElement("td",null,e.date),r.a.createElement("td",null,e.entryValue),r.a.createElement("td",{style:{width:"15px"}},"\u2b95"),r.a.createElement("td",null,e.resultValue))}))))});oe.defaultProps={data:[],style:{}};var le=oe,ue=function(e){var t=e.conversionHistory,n=e.clearConversionHistory,c=e.setConversionHistory,o=e.disableButtons;return Object(a.useEffect)((function(){$((function(e){c(e)}),(function(){}))}),[c]),r.a.createElement("div",{className:"ConversionHistory"},r.a.createElement(le,{data:Object(ce.a)(t).reverse(),style:{height:"300px"}}),r.a.createElement("button",{className:"ConversionHistory_ClearButton",type:"button",onClick:function(){n(),function(e,t){ee.apply(this,arguments)}((function(){}),(function(){}))},disabled:o},"Wyczy\u015b\u0107 histori\u0119"))};ue.defaultProps={disableButtons:!1};var ie=Object(l.b)((function(e){return{conversionHistory:e.conversionHistory}}),(function(e){return{clearConversionHistory:function(){return e(M.Clear())},setConversionHistory:function(t){return e(M.Set(t))}}}))(ue),se=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m,null,r.a.createElement(A,{sideHeader:"Historia",sidePanel:function(e){var t=e.opened;return r.a.createElement(ie,{disableButtons:!t})}},r.a.createElement(re,null))),r.a.createElement(j,null))},de=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function me(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var fe=function(){return"".concat((new Date).getUTCMilliseconds()).concat(Math.random())};var pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return[].concat(Object(ce.a)(e),[{type:b.ERROR,header:"".concat(t.header),message:"".concat(t.message),key:fe()}]);case y:return[].concat(Object(ce.a)(e),[{type:b.WARNING,header:"".concat(t.header),message:"".concat(t.message),key:fe()}]);case h:return[].concat(Object(ce.a)(e),[{type:b.INFO,header:"".concat(t.header),message:"".concat(t.message),key:fe()}]);case E:return[].concat(Object(ce.a)(e),[{type:b.SUCCESS,header:"".concat(t.header),message:"".concat(t.message),key:fe()}]);case C:var n=Object(ce.a)(e),a=n.findIndex((function(e){return e.key===t.key}));return-1===a?e:(n.splice(a,1),n);default:return e}};var ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return[];case U:return t.data;default:return e}},ye=Object(u.b)({alert:pe,conversionHistory:ve}),he=Object(u.c)(ye,{conversionHistory:[]});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:he},r.a.createElement(i.a,null,r.a.createElement(s.b,null,r.a.createElement(se,null))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/currency-converter",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/currency-converter","/service-worker.js");de?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):me(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):me(t,e)}))}}()}},[[40,1,2]]]);
//# sourceMappingURL=main.66f29aeb.chunk.js.map